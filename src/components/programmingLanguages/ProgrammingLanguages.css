.canvas-container {
  /* Use grid instead of flex for better performance */
  display: grid;
  place-items: center;
  
  /* Fill parent width */
  width: 100%;
  
  /* Fixed aspect ratio for better stability */
  height: 75vh;
  min-height: 450px;
  max-height: 800px;
  
  /* Contain the canvas properly */
  position: relative;
  overflow: visible;
  
  /* Promote GPU acceleration */
  transform: translateZ(0);
  will-change: transform;
}

.complex-canvas {
  /* Let canvas take available space */
  width: 100%;
  height: 100%;
  display: block;
  
  /* Improve rendering */
  image-rendering: optimizeSpeed;
  
  /* Allow scrolling through */
  touch-action: auto;
  
  /* Hardware acceleration */
  transform: translateZ(0);
}

/* Mobile-specific optimizations */
@media (max-width: 600px) {
  .canvas-container {
    /* Adjust height for mobile layouts */
    height: auto;
    
    /* Safer min-height that works better across devices */
    min-height: 400px;
    
    /* Remove constraints to allow proper sizing based on content */
    max-height: none;
    
    /* Better padding for touch */
    padding: 10px 0;
  }
  
  .complex-canvas {
    /* Use dynamic height from JavaScript, don't enforce a fixed min-height */
    min-height: unset;
    
    /* Prevent content from being cut off */
    overflow: visible;
  }
}

/* Medium screens with limited height */
@media (min-width: 601px) and (max-height: 700px) {
  .canvas-container {
    /* Slightly taller relative height */
    height: 85vh;
    min-height: 400px;
  }
}

/* Larger screens */
@media (min-width: 1200px) {
  .canvas-container {
    /* Cap maximum height on very large screens */
    max-height: 850px;
  }
}

/* Ensure height is correctly handled when embedded */
.fade-in-section .canvas-container {
  height: 100%;
}